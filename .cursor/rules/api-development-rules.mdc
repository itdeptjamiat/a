# EchoReads API Development Rules

## ğŸ“¡ HTTP Client Requirements

**ALL API calls MUST use EchoInstance:**

```typescript
// âœ… CORRECT - Using EchoInstance
import { APIIns } from '@/axios/EchoInstance';

export const fetchData = createAsyncThunk(
  'module/fetchData',
  async (params: FetchParams, { rejectWithValue }) => {
    try {
      const response = await APIIns.get('/endpoint', { params });
      return response.data;
    } catch (error) {
      return rejectWithValue(error.response?.data?.message || 'Failed to fetch');
    }
  }
);

// âŒ INCORRECT - Direct axios usage
import axios from 'axios';
const response = await axios.get('/endpoint');
```

## ğŸ” Authentication Integration

- **Use attachAuthToken() function** for setting JWT tokens
- **Import APIIns from EchoInstance.ts** - never create new instances
- **Handle 401 errors globally** via Axios interceptors
- **Use selectToken selector** to get token from Redux state

## ğŸŒ API Configuration

- **Base URL configured in EchoInstance.ts** - don't hardcode URLs
- **Headers configured automatically** - don't set manually
- **Interceptors handle auth and errors** - don't duplicate logic
- **Use consistent error handling** across all API calls

## ğŸš« Prohibited Patterns

- âŒ No direct axios imports or usage
- âŒ No custom HTTP client creation
- âŒ No hardcoded API URLs
- âŒ No manual header management
- âŒ No duplicate error handling logic
- âŒ No custom authentication logic

## âœ… Required Patterns

- âœ… Use APIIns from EchoInstance.ts
- âœ… Use createAsyncThunk for all API calls
- âœ… Handle errors with rejectWithValue
- âœ… Use consistent error message format
- âœ… Import from EchoInstance.ts
- âœ… Follow existing API patterns

## ğŸ” Before Making API Calls

1. **Check existing API implementations** for patterns
2. **Use APIIns from EchoInstance.ts**
3. **Use createAsyncThunk for async operations**
4. **Handle errors consistently**
5. **Follow error message format**

## ğŸ“š API Documentation

- **Document all endpoints** with expected request/response formats
- **Include error handling examples** for common scenarios
- **Document authentication requirements** for protected endpoints
- **Provide usage examples** for complex API calls

## ğŸ¯ Error Handling Standards

- **Use rejectWithValue for all errors** in async thunks
- **Provide user-friendly error messages** from API responses
- **Handle network errors gracefully** with fallback messages
- **Log errors appropriately** for debugging

## ğŸ”„ API Response Handling

- **Always destructure response.data** from API calls
- **Handle different response formats** consistently
- **Validate response structure** before using data
- **Transform data as needed** in selectors, not actions

Remember: All API calls must use EchoInstance. Never use axios directly or create custom HTTP clients.
description:
globs:
alwaysApply: false
---
